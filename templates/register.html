{% extends "index.html" %}
{% block title %}Registrarse{% endblock %}

{% block content %}
<div class="max-w-md mx-auto bg-white p-8 rounded-lg shadow-md">
  <h2 class="text-2xl font-bold mb-6 text-center">Crear una Cuenta</h2>
  
  <form action="{{ url_for('register') }}" method="post" class="space-y-6">
    <div>
      <!-- MEJORA: Se cambia a 'email' -->
      <label for="email" class="block font-medium text-gray-700">Correo Electrónico Institucional</label>
      <input type="email" name="email" id="email" placeholder="ejemplo@alumno.buap.mx" class="w-full mt-1 p-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required>
    </div>
    
    <div>
      <label for="password" class="block font-medium text-gray-700">Contraseña</label>
      <input type="password" name="password" id="password" class="w-full mt-1 p-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500" required onkeyup="checkPasswordStrength();">
      <div id="password-strength-status" class="mt-2 text-sm"></div>
    </div>
    
    <div>
      <button type="submit" class="w-full bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
        Registrarme
      </button>
    </div>
  </form>
  
  <p class="mt-6 text-center text-sm text-gray-600">
    ¿Ya tienes una cuenta? <a href="{{ url_for('login') }}" class="font-medium text-indigo-600 hover:underline">Inicia sesión</a>
  </p>
</div>

<script>
function checkPasswordStrength() {
    var password = document.getElementById("password").value;
    var strength = 0;
    var strengthText = "";
    var strengthClass = "";

    if (password.length >= 8) {
        strength += 1;
    }
    if (password.match(/[a-z]+/)) {
        strength += 1;
    }
    if (password.match(/[A-Z]+/)) {
        strength += 1;
    }
    if (password.match(/[0-9]+/)) {
        strength += 1;
    }
    if (password.match(/[$@#&!]+/)) {
        strength += 1;
    }

    var status = document.getElementById("password-strength-status");

    switch (strength) {
        case 0:
        case 1:
        case 2:
            strengthText = "Muy Débil";
            strengthClass = "text-red-500";
            break;
        case 3:
            strengthText = "Débil";
            strengthClass = "text-orange-500";
            break;
        case 4:
            strengthText = "Buena";
            strengthClass = "text-yellow-500";
            break;
        case 5:
            strengthText = "Fuerte";
            strengthClass = "text-green-500";
            break;
    }
    status.innerHTML = "Fortaleza: <span class='" + strengthClass + "'>" + strengthText + "</span>";
}
</script>
{% endblock %}
