{% extends "index.html" %}
{% block title %}Sala P2P (WebRTC){% endblock %}

{% block content %}
  <div class="bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-2xl font-bold mb-4">üõ∞Ô∏è Sala P2P (WebRTC)</h2>
    <div class="space-y-4">
      <div>
        <label for="room" class="block font-medium">Nombre de la Sala</label>
        <input id="room" class="w-full p-2 border rounded-lg" placeholder="ej. tesis2025"/>
        <div class="mt-2 space-x-2">
          <button onclick="join()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">Unirme</button>
          <button onclick="leave()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">Salir</button>
        </div>
      </div>

      <h3 class="font-bold text-lg pt-4">Chat</h3>
      <div id="log" class="bg-gray-900 text-gray-200 p-3 h-56 overflow-auto rounded-lg font-mono text-sm"></div>
      <div class="flex space-x-2">
        <input id="msg" class="w-full p-2 border rounded-lg" placeholder="Escribe un mensaje"/>
        <button onclick="sendMsg()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">Enviar</button>
      </div>

      <h3 class="font-bold text-lg pt-4">Enviar Archivo</h3>
      <div class="flex space-x-2">
        <input type="file" id="fileInput" class="w-full p-2 border rounded-lg"/>
        <button onclick="sendFile()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700">Enviar Archivo</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script src="https://unpkg.com/simple-peer@9.11.1/simplepeer.min.js"></script>
  <script src="{{ url_for('static', filename='webrtc.js') }}"></script>
{% endblock %}